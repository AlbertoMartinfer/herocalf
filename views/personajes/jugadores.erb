<h2>
	Listado de los <%= jugadores.count %> jugadores
	y sus <%= heros.count %> personajes
</h2>
<p>
	Los jugadores han sido ordenados por su puntuación de honor.
	Si alguno percibe que algún sumatorio es incorrecto, es posible
	que sea motivo de la magia oscura del Malvado Brujo. 
	Hemos de ser conscientes que el creador del universo ha de estar
	por encima de todos los seres. Ergo, Ignórese.
</p>

<div class="table-responsive">
	<table class="table">
		<thead>
			<tr>
				<th>#</th>
				<th>Jugador</th>
				<th>Personajes</th>
				<th>Honor</th>
			</tr>
		</thead>
		<tbody>
			<% jugadores.sort_by { |j| honor(j) }.reverse.each_with_index do |j,i| %>
			<tr>
				<td><%= i %></td>
				<td><%= j %></td>
				<td>
					<table>
						<tbody>
							<tr>
								<% heros.each do |hero| %>
									<% if hero.jugador == j %>
										<td>
											<a href='/hero/<%= hero.id %>'>
												<%= erb :'display/portrait', locals: { h: hero } %>
											</a>
											<%= hero.nivel %>
										</td>
									<% end %>
								<% end %>
							</tr>
						</tbody>
					</table>
				</td>
				<td><%= honor(j) %></td>
			</tr>
			<% end %>
		</tbody>
	</table>
</div>